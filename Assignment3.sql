
-- 1.
CREATE TABLE TESTDATA(
	TESTNO INT PRIMARY KEY IDENTITY(1,1)
)
INSERT INTO TESTDATA DEFAULT VALUES; 
select * from TESTDATA

----------------------------

-- 2.
CREATE TABLE COUNTRY(
	COUNTRYID VARCHAR(3) PRIMARY KEY,
	COUNTRYNAME VARCHAR(20) UNIQUE,
	CAPITAL VARCHAR(20),
	FLAG	VARBINARY(MAX)
)
INSERT INTO COUNTRY VALUES(1, 'INDIA', 'NEW DELHI', (SELECT * FROM OPENROWSET(BULK N'C:\Users\Mohd.Saqib\Pictures\IndianFlag.png', SINGLE_BLOB) as T1))
INSERT INTO COUNTRY VALUES(2, 'PALESTINE', 'JERUSALEM', (SELECT * FROM OPENROWSET(BULK N'C:\Users\Mohd.Saqib\Pictures\PalestinianFlag.jpg', SINGLE_BLOB) as T1))
select * from COUNTRY;

CREATE TABLE STATE(
	STATEID	VARCHAR(3) PRIMARY KEY,
	STATENAME	VARCHAR(20),
	STATECAPITAL VARCHAR(20),
	COUNTRYID	VARCHAR(3) REFERENCES COUNTRY(COUNTRYID)
)
INSERT INTO STATE VALUES(1, 'UP', 'LUCKNOW', 1)
INSERT INTO STATE VALUES(2, 'MAHARASHTRA', 'MUMBAI', 1)
INSERT INTO STATE VALUES(3, 'GAZA STRIP', 'GAZA CITY', 2)
INSERT INTO STATE VALUES(4, 'WEST BANK', 'JERUSALEM', 2)

select * from STATE;

-------------------------

-- 3.
CREATE TABLE CUSTOMER(
	CUSTOMERID Numeric(3) PRIMARY KEY,
	CUSTOMERNAME VARCHAR(20) NOT NULL
)

CREATE TABLE CATEGORY(
	CATEGORYID NUMERIC(3) PRIMARY KEY,
	CATEGORYNAME VARCHAR(20) NOT NULL UNIQUE,
	DESCRIPTION VARCHAR(20)
)

CREATE TABLE PRODUCT(
	PRODUCTID NUMERIC(3) PRIMARY KEY,
	PRODUCTNAMENAME VARCHAR(20) NOT NULL,
	CATEGORYID NUMERIC(3) REFERENCES CATEGORY(CATEGORYID),
	PRICE NUMERIC(10,2) CHECK(PRICE>50),
	QUANTITY NUMERIC(3) CHECK(QUANTITY>0)
)

CREATE TABLE ORDERS(
	ORDERYEAR NUMERIC(3),
	ORDERMONTH VARCHAR(20),
	ORDERID VARCHAR(20),
	ORDERDATE DATETIME DEFAULT GETDATE(),
	PRODUCTID NUMERIC(3) REFERENCES PRODUCT(PRODUCTID),
	CUSTOMERID NUMERIC(3) REFERENCES CUSTOMER(CUSTOMERID),
	ORDQRY NUMERIC(3) CHECK(ORDQRY>0)
)

-- Add column “Address – Varchar - 20” in Customer table with validation that customer address
-- can be either Mumbai, Delhi or pune
SELECT * FROM CUSTOMER
ALTER TABLE CUSTOMER ADD ADDRESS VARCHAR(20) CHECK( ADDRESS IN ('MUMBAI', 'DELHI', 'PUNE') )
SELECT * FROM CUSTOMER
 
-- Modify size of “OrderYear” column in Orders table as 4 instead of 3
ALTER TABLE ORDERS ALTER COLUMN ORDERYEAR NUMERIC(4)
-- Modify column “OrderMonth” in Orders table from Varchar to int data type
ALTER TABLE ORDERS ALTER COLUMN ORDERMONTH INT
-- Drop “Description” column from Category table
SELECT * FROM CATEGORY
ALTER TABLE CATEGORY DROP COLUMN DESCRIPTION
SELECT * FROM CATEGORY

-- INSERTING DATA

INSERT INTO CUSTOMER VALUES(1, 'AJAY', 'MUMBAI')
INSERT INTO CUSTOMER VALUES(2, 'CHIRAG', 'DELHI')
INSERT INTO CUSTOMER VALUES(3, 'AMIT', 'PUNE')
select * from CUSTOMER

INSERT INTO CATEGORY VALUES(1, 'FOOD')
INSERT INTO CATEGORY VALUES(2, 'ELECTRONICS')
INSERT INTO CATEGORY VALUES(3, 'STATIONARY')
select * from CATEGORY

INSERT INTO PRODUCT VALUES(101, 'TEA', 1, 60, 100)
INSERT INTO PRODUCT VALUES(102, 'PEN', 3, 80, 50)
INSERT INTO PRODUCT VALUES(103, 'NOTEBOOK', 3, 125, 200)
INSERT INTO PRODUCT VALUES(104, 'COFFEE', 1, 80, 100)
INSERT INTO PRODUCT VALUES(105, 'TV', 2, 15000, 5)
INSERT INTO PRODUCT VALUES(106, 'WASHING MACHINE', 2, 12000, 3)
select * from PRODUCT

INSERT INTO ORDERS VALUES(2010, 1, 1, GETDATE(), 101, 2, 10)
INSERT INTO ORDERS VALUES(2010, 1, 2, GETDATE(), 104, 1, 2)
INSERT INTO ORDERS VALUES(2010, 2, 1, GETDATE(), 105, 3, 1)
INSERT INTO ORDERS VALUES(2010, 2, 2, GETDATE(), 101, 1, 5)
INSERT INTO ORDERS VALUES(2010, 2, 3, GETDATE(), 106, 2, 1)
INSERT INTO ORDERS VALUES(2012, 1, 1, GETDATE(), 104, 1, 2)
select * from ORDERS


